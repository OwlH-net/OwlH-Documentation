

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>install owlh node &mdash; owlh 0.17.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="owlh 0.17.x documentation" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> owlh
          

          
          </a>

          
            
            
              <div class="version">
                0.17.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../OwlHGS.html">Getting Started with OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../components.html">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../components.html#owlh-master">OwlH Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components.html#owlh-node">OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components.html#owlh-ui">OwlH UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components.html#owlh-client">OwlH Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../capabilities.html">Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../capabilities.html#nids-and-traffic-analysis-support">NIDS and Traffic analysis support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../capabilities.html#top-capabilities">Top capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../capabilities.html#traffic-transport-and-management">Traffic transport and management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../capabilities.html#owlh-plugins">OwlH Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../capabilities.html#others">Others</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#standard-data-flow">Standard data flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#inside-owlh-node">Inside OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture.html#used-ports">Used ports</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../OwlHInstall.html">Install OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../OwlHInstall.html#owlh-installer">OwlH Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHInstall.html#install-components">Install components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHInstall.html#standard-installation">Standard Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHInstall.html#advanced-installation">Advanced Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHInstall.html#configure">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHInstall.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHInstall.html#appendices">Appendices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../OwlHUpdate.html">Update and upgrade OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../OwlHUpdate.html#owlh-components">OwlH components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../OwlHUM.html">User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../OwlHFC.html">First configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHFC.html#user-interface">User Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHFC.html#analyzer">Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHFC.html#suricata">Suricata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHFC.html#zeek">Zeek</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHFC.html#wazuh">Wazuh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHCF.html">Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHapiconf.html">API service configuration files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../OwlHapiconf.html#node-configuration">Node configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../OwlHapiconf.html#master-configuration">Master configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHmainconf.html">Main Configuration files (main.conf)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../OwlHMasterMainConf.html">Master Main Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../OwlHNodeMainConf.html">Node Main Configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHAnalyzer.html">Analyzer configuration file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHAPI.html">OwlH API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHAPIM.html">OwlH MASTER RESTful API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHAPIN.html">OwlH NODE RESTful API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../OwlHTroubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../OwlHTroubleshooting.html#owlh-node">OwlH Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHTroubleshooting.html#owlh-master">OwlH Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHTroubleshooting.html#owlh-ui">OwlH UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lookingfor.html">Looking for…</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../OwlHSuricata.html">OwlH and Suricata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHSuricata.html#main-steps">Main steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHSuricata.html#suricata-output-with-owlh">Suricata output with OwlH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHSuricata.html#suricata-rules">Suricata Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHZeek.html">OwlH and Zeek</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHZeek.html#integration-logical-diagram">Integration Logical Diagram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../OwlHZeek.html#components">Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHZeek.html#configure-zeek-owlh-node">Configure - Zeek - OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHZeek.html#zeek-logs-output-format-to-json">Zeek Logs Output format to JSON</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../OwlHZeek.html#option-1-modify-ascii-writer-output">Option 1 - Modify ASCII writer output</a></li>
<li class="toctree-l4"><a class="reference internal" href="../OwlHZeek.html#zeek-event-enritchment-to-help-wazuh-ruleset">Zeek Event Enritchment to help Wazuh ruleset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../OwlHZeek.html#loading-zeek-customizations-at-zeek-start">Loading Zeek customizations at Zeek start</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHZeek.html#review-your-kibana-dashboard">Review your Kibana Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../OwlHMoloch.html">OwlH and Moloch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../OwlHMoloch.html#configure-moloch">Configure Moloch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHMoloch.html#moloch-in-master">Moloch in Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OwlHMoloch.html#moloch-in-remote-server">Moloch in remote server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scenarios.html">Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../scenarios.html#basic">BASIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenarios.html#advanced">ADVANCED</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scenarios.html#integrate-with-wazuh">INTEGRATE WITH WAZUH</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">If you need help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">owlh</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>install owlh node</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/main/install/ins-owlh-node.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="install-owlh-node">
<h1>install owlh node<a class="headerlink" href="#install-owlh-node" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul class="simple">
<li>install with installer</li>
<li>service config</li>
<li>install suricata</li>
<li>install zeek</li>
<li>install wazuh</li>
<li>install owlh interface</li>
<li>install software tap related packets</li>
<li>configure your firewall</li>
<li>register node in master and configure</li>
</ul>
</div></blockquote>
<div class="section" id="how-to-install-owlh-node">
<h2>How to install OwlH Node<a class="headerlink" href="#how-to-install-owlh-node" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">First, be sure you will have your OwlH Master ready. And your OwlH UI pointing to your OwlH Master.</p>
</div>
<img alt="../../_images/nodes.png" src="../../_images/nodes.png" />
<p>Ready?</p>
<div class="section" id="download-and-prepare-owlh-installer">
<h3>Download and prepare OwlH Installer<a class="headerlink" href="#download-and-prepare-owlh-installer" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OS version</th>
<th class="head">URL</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CentOS 7</td>
<td>wget <a class="reference external" href="http://repo.owlh.net/current-centos/owlhinstaller.tar.gz">http://repo.owlh.net/current-centos/owlhinstaller.tar.gz</a></td>
</tr>
<tr class="row-odd"><td>Ubuntu</td>
<td>wget <a class="reference external" href="http://repo.owlh.net/current-debian/owlhinstaller.tar.gz">http://repo.owlh.net/current-debian/owlhinstaller.tar.gz</a></td>
</tr>
<tr class="row-even"><td>Raspbian</td>
<td>wget <a class="reference external" href="http://repo.owlh.net/current-arm/owlhinstaller.tar.gz">http://repo.owlh.net/current-arm/owlhinstaller.tar.gz</a></td>
</tr>
</tbody>
</table>
<p>Now let’s install it.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># mkdir /tmp/owlhinstaller</span>
<span class="c1"># tar -C /tmp/owlhinstaller -xvf owlhinstaller.tar.gz</span>
</pre></div>
</div>
<p>We are almost done. In order to allow OwlH installer to do its work, we need to tell it what is/are out target/s for this box. A target is an OwlH component that must be installed or updated. All this info is provided in the config.json file included in the owlhinstaller folder</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Right now, our target is “owlhnode”, our action is “install”</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<dl class="last docutils">
<dt>Choose the right repo:</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://repo.owlh.net/current-centos/">http://repo.owlh.net/current-centos/</a></li>
<li><a class="reference external" href="http://repo.owlh.net/current-debian/">http://repo.owlh.net/current-debian/</a></li>
<li><a class="reference external" href="http://repo.owlh.net/current-arm/">http://repo.owlh.net/current-arm/</a></li>
</ul>
</dd>
</dl>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="o">...</span>
<span class="s2">&quot;tmpfolder&quot;</span><span class="p">:</span><span class="s2">&quot;/tmp/&quot;</span><span class="p">,</span>
<span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;install&quot;</span><span class="p">,</span>      <span class="o">&lt;===</span>
<span class="s2">&quot;repourl&quot;</span><span class="p">:</span><span class="s2">&quot;http://repo.owlh.net/current-centos/&quot;</span><span class="p">,</span>  <span class="o">&lt;===</span> <span class="n">choose</span> <span class="n">your</span> <span class="n">right</span> <span class="n">repo</span> <span class="p">(</span><span class="n">current</span><span class="o">-</span><span class="n">centos</span><span class="p">,</span> <span class="n">current</span><span class="o">-</span><span class="n">debian</span><span class="p">,</span> <span class="n">current</span><span class="o">-</span><span class="n">arm</span><span class="p">)</span>
<span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;owlhnode&quot;</span>            <span class="o">&lt;===</span>
<span class="p">],</span>
<span class="s2">&quot;masterfiles&quot;</span><span class="p">:[</span>
<span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">you can change your installation paths as needed. Changing default paths may need further paths change for some configurations like service init files. If you are not familiar with it, keep defaults until it is really needed or ask for help.</p>
</div>
</div>
<div class="section" id="id1">
<h3>Install OwlH Node<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># cd /tmp/owlhinstaller</span>
<span class="c1"># ./owlhinstaller</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">systemd</span><span class="p">:</span>
<span class="c1"># cp /usr/local/owlh/src/owlhnode/conf/service/owlhnode.service /etc/systemd/system</span>
<span class="c1"># systemctl daemon-reload</span>
<span class="c1"># systemctl enable owlhnode</span>
<span class="c1"># systemctl start owlhnode</span>
</pre></div>
</div>
</div>
<div class="section" id="check-if-your-owlh-node-is-running">
<h3>Check if your OwlH Node is running<a class="headerlink" href="#check-if-your-owlh-node-is-running" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">check</span> <span class="n">owlhnode</span> <span class="n">logs</span>
<span class="c1"># tail -f /var/log/owlh/owlhnode-api.log</span>

<span class="n">check</span> <span class="n">owlhnode</span> <span class="n">process</span> <span class="ow">is</span> <span class="n">running</span>
<span class="c1"># systemctl status owlhnode.service</span>
<span class="c1"># ps -ef | grep owlhnode</span>

<span class="n">check</span> <span class="k">if</span> <span class="n">owlhnode</span> <span class="n">service</span> <span class="n">port</span> <span class="ow">is</span> <span class="n">listening</span>
<span class="c1"># netstat -nputa | grep 50002</span>
</pre></div>
</div>
</div>
<div class="section" id="register-your-new-node-in-your-owlh-master">
<h3>Register your new node in your OwlH Master<a class="headerlink" href="#register-your-new-node-in-your-owlh-master" title="Permalink to this headline">¶</a></h3>
<p>You will need:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">OwlH</span> <span class="n">node</span> <span class="n">name</span>
<span class="n">OwlH</span> <span class="n">node</span> <span class="n">ip</span>
<span class="n">OwlH</span> <span class="n">node</span> <span class="n">port</span>
</pre></div>
</div>
<p>Go to your OwlH master console -&gt; nodes -&gt; Add NIDS and introduce the right values</p>
<img alt="../../_images/addnode.png" src="../../_images/addnode.png" />
</div>
<div class="section" id="modify-your-owlh-installer-configuration-to-keep-your-system-uptodate">
<h3>Modify your OwlH Installer configuration to keep your system uptodate<a class="headerlink" href="#modify-your-owlh-installer-configuration-to-keep-your-system-uptodate" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Right now, our target is “owlhnode”, our action is “update”.</p>
</div>
<p>modify your config.json file to set action as “update”.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="s2">&quot;tmpfolder&quot;</span><span class="p">:</span><span class="s2">&quot;/tmp/&quot;</span><span class="p">,</span>
<span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>      <span class="o">&lt;===</span>
<span class="s2">&quot;repourl&quot;</span><span class="p">:</span><span class="s2">&quot;http://repo.owlh.net/current-centos/&quot;</span><span class="p">,</span>  <span class="o">&lt;===</span> <span class="n">choose</span> <span class="n">your</span> <span class="n">right</span> <span class="n">repo</span>
<span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;owlhnode&quot;</span>            <span class="o">&lt;===</span>
<span class="p">],</span>
<span class="o">...</span>
</pre></div>
</div>
<p>You can add owlhinstaller to your crontab for an automatic update of your platform. following lines will move OwlH installer and create cron job. Please change as needed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While this is recommended, it is not mandatory. you can run your OwlH Installer manually as per your needs</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># mkdir /usr/local/owlh/src/owlhinstaller</span>
<span class="c1"># cp /tmp/owlhinstaller/* /usr/local/owlh/src/owlhinstaller/</span>
<span class="c1"># (crontab -l ; echo &quot;0 0 * * * /usr/local/owlh/src/owlhinstaller/owlhinstaller &quot;) | crontab -</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, owlh team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.17.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>