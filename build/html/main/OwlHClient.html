

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OwlH Client &mdash; owlh 0.17.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="owlh 0.17.x documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> owlh
          

          
          </a>

          
            
            
              <div class="version">
                0.17.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="OwlHGS.html">Getting Started with OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="components.html">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-master">OwlH Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-node">OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-ui">OwlH UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-client">OwlH Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="capabilities.html">Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#nids-and-traffic-analysis-support">NIDS and Traffic analysis support</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#top-capabilities">Top capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#traffic-transport-and-management">Traffic transport and management</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#owlh-plugins">OwlH Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#others">Others</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#standard-data-flow">Standard data flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#inside-owlh-node">Inside OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#used-ports">Used ports</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHInstall.html">Install OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#owlh-installer">OwlH Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#install-components">Install components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHInstall.html#standard-installation">Standard Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHInstall.html#advanced-installation">Advanced Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#configure">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#appendices">Appendices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHUpdate.html">Update and upgrade OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHUpdate.html#owlh-components">OwlH components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHUM.html">User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHFC.html">First configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#user-interface">User Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#analyzer">Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#suricata">Suricata</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#zeek">Zeek</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#wazuh">Wazuh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHCF.html">Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHapiconf.html">API service configuration files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHapiconf.html#node-configuration">Node configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHapiconf.html#master-configuration">Master configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHmainconf.html">Main Configuration files (main.conf)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHMasterMainConf.html">Master Main Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHNodeMainConf.html">Node Main Configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHAnalyzer.html">Analyzer configuration file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHAPI.html">OwlH API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHAPIM.html">OwlH MASTER RESTful API</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHAPIN.html">OwlH NODE RESTful API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHTroubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHTroubleshooting.html#owlh-node">OwlH Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHTroubleshooting.html#owlh-master">OwlH Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHTroubleshooting.html#owlh-ui">OwlH UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lookingfor.html">Looking for…</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHSuricata.html">OwlH and Suricata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHSuricata.html#main-steps">Main steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHSuricata.html#suricata-output-with-owlh">Suricata output with OwlH</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHSuricata.html#suricata-rules">Suricata Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHZeek.html">OwlH and Zeek</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#integration-logical-diagram">Integration Logical Diagram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#components">Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#configure-zeek-owlh-node">Configure - Zeek - OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#zeek-logs-output-format-to-json">Zeek Logs Output format to JSON</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#option-1-modify-ascii-writer-output">Option 1 - Modify ASCII writer output</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#zeek-event-enritchment-to-help-wazuh-ruleset">Zeek Event Enritchment to help Wazuh ruleset</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#loading-zeek-customizations-at-zeek-start">Loading Zeek customizations at Zeek start</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#review-your-kibana-dashboard">Review your Kibana Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHMoloch.html">OwlH and Moloch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHMoloch.html#configure-moloch">Configure Moloch</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHMoloch.html#moloch-in-master">Moloch in Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHMoloch.html#moloch-in-remote-server">Moloch in remote server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scenarios.html">Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scenarios.html#basic">BASIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="scenarios.html#advanced">ADVANCED</a></li>
<li class="toctree-l2"><a class="reference internal" href="scenarios.html#integrate-with-wazuh">INTEGRATE WITH WAZUH</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contact.html">If you need help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">owlh</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>OwlH Client</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/main/OwlHClient.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="owlh-client">
<h1>OwlH Client<a class="headerlink" href="#owlh-client" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-owlh-client">
<h2>What is OwlH Client?<a class="headerlink" href="#what-is-owlh-client" title="Permalink to this headline">¶</a></h2>
<p>OwlH client is an small app that runs in end points platforms and it will be helpful to forward traffic in real-time or store it locally until it is collected or is time to forward.</p>
<p>This OwlH client is useful when you are running OwlH in any Software TAP configuration. Mostly, it is used in Cloud environments when you want to forward traffic from your instance to an OwlH Node for analysis.</p>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p><strong>OwlH Client is currently available for:</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">CentOS:</th><td class="field-body"><a class="reference external" href="https://repo.owlh.net/current-centos/owlhclient.sh">https://repo.owlh.net/current-centos/owlhclient.sh</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Debian/Ubuntu:</th><td class="field-body"><a class="reference external" href="https://repo.owlh.net/current-debian/owlhclient.sh">https://repo.owlh.net/current-debian/owlhclient.sh</a></td>
</tr>
</tbody>
</table>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p><strong>For Windows users</strong></p>
<p>You can manage your STAP client configuration running following command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">windump</span>\<span class="n">windump</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1</span> <span class="o">-</span><span class="n">nn</span> <span class="o">-</span><span class="n">s0</span> <span class="o">-</span><span class="n">w</span> <span class="o">-</span> <span class="ow">not</span> <span class="n">port</span> <span class="mi">50010</span><span class="o">|</span> <span class="n">C</span><span class="p">:</span>\<span class="n">cygwin64</span>\<span class="nb">bin</span>\<span class="n">socat</span>  <span class="o">-</span> <span class="n">OPENSSL</span><span class="p">:</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">142.149</span><span class="p">:</span><span class="mi">50010</span><span class="p">,</span><span class="n">cert</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span><span class="n">ca</span><span class="o">.</span><span class="n">pem</span><span class="p">,</span><span class="n">verify</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">forever</span><span class="p">,</span><span class="n">retry</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">interval</span><span class="o">=</span><span class="mi">5</span>
</pre></div>
</div>
<p>To be able to run this in a windows 2012 R2 or newer you will need few packets.</p>
<ul class="last simple">
<li>Windump and wimpcap</li>
<li>Socat (installed with Cygwin)</li>
</ul>
</div>
<p>OwlH Client will be installed on</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">owlh</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Configuration file and log files (one log file per interface) are in the same folder.</p>
</div>
<p>Configuration file conf.json looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;collectorIP&quot;</span><span class="p">:</span><span class="s2">&quot;10.13.1.13&quot;</span><span class="p">,</span>
    <span class="s2">&quot;collectorPort&quot;</span><span class="p">:</span><span class="s2">&quot;50010&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cert&quot;</span><span class="p">:</span><span class="s2">&quot;/usr/local/owlh/src/owlhnode/conf/certs/ca.pem&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bpf&quot;</span><span class="p">:</span><span class="s2">&quot;not port 50010 and not port 22&quot;</span><span class="p">,</span>
    <span class="s2">&quot;includeInt&quot;</span><span class="p">:[</span><span class="s2">&quot;en&quot;</span><span class="p">,</span><span class="s2">&quot;eth&quot;</span><span class="p">],</span>
    <span class="s2">&quot;excludeInt&quot;</span><span class="p">:[</span><span class="s2">&quot;lo&quot;</span><span class="p">],</span>
    <span class="s2">&quot;includeNet&quot;</span><span class="p">:[</span><span class="s2">&quot;0.0.0.0/0&quot;</span><span class="p">],</span>
    <span class="s2">&quot;excludeIP&quot;</span><span class="p">:[</span><span class="s2">&quot;192.168.0.1&quot;</span><span class="p">],</span>
    <span class="s2">&quot;waitTime&quot;</span><span class="p">:</span><span class="mi">10</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Be sure to update the parameters properly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Collector IP:</th><td class="field-body">Is your OwlH Node or OwlH Master IP that is running the STAP socket-to-network service</td>
</tr>
<tr class="field-even field"><th class="field-name">Collector Port:</th><td class="field-body">Is the port on OwlH StAP service side</td>
</tr>
<tr class="field-odd field"><th class="field-name">Cert:</th><td class="field-body">Is deployed and build with the sh script when installing client. feel free to change as needed.</td>
</tr>
<tr class="field-even field"><th class="field-name">BPF:</th><td class="field-body">Please, take care here. as you are forwarding traffic from a host to a different one, you can create a loop or kill your network if forwarding is not right filtered. minimum filtering must include STAP service ports like in the picture</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Include Interfaces:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">This parameter allows you to define which interfaces client must listen to. current configuration will manage enX (en0, en1, en2 etc) as well as ethX (eth0, eth1, eth2 etc). A log file for each interface will be created.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Exclude Interfaces:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Lets suppose you don’t want to listen to en1 as per our previous sample, then you can include here en1 as an interface to exclude.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Include Nets:</th><td class="field-body">You will also able to filter what interfaces to listen by identifying with ip and network has the interface defined. 0.0.0.0/0 means that any ip is allowed.</td>
</tr>
<tr class="field-even field"><th class="field-name">Exclude IPs:</th><td class="field-body">Again, you can stop collecting from interfaces that will include the excluded ip.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Wait Time:</th><td class="field-body">Time between checks in minutes. if you do a configuration change, Client will restart as needed with the new configuration. If client went down or connection is lost because OwlH STAP service is done for a while, Client will try to reconnect each ‘wait time’</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, owlh team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.17.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>