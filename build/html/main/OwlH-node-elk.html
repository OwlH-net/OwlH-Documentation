

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sync with ELK 7.x &mdash; owlh 0.17.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="owlh 0.17.x documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> owlh
          

          
          </a>

          
            
            
              <div class="version">
                0.17.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="OwlHGS.html">Getting Started with OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="components.html">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-master">OwlH Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-node">OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-ui">OwlH UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="components.html#owlh-client">OwlH Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="capabilities.html">Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#nids-and-traffic-analysis-support">NIDS and Traffic analysis support</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#top-capabilities">Top capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#traffic-transport-and-management">Traffic transport and management</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#owlh-plugins">OwlH Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="capabilities.html#others">Others</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#standard-data-flow">Standard data flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#inside-owlh-node">Inside OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#used-ports">Used ports</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHInstall.html">Install OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#owlh-installer">OwlH Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#install-components">Install components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHInstall.html#standard-installation">Standard Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHInstall.html#advanced-installation">Advanced Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#configure">Configure</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHInstall.html#appendices">Appendices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHUpdate.html">Update and upgrade OwlH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHUpdate.html#owlh-components">OwlH components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHUM.html">User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHFC.html">First configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#user-interface">User Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#analyzer">Analyzer</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#suricata">Suricata</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#zeek">Zeek</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHFC.html#wazuh">Wazuh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHCF.html">Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHapiconf.html">API service configuration files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHapiconf.html#node-configuration">Node configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHapiconf.html#master-configuration">Master configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHmainconf.html">Main Configuration files (main.conf)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHMasterMainConf.html">Master Main Configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHNodeMainConf.html">Node Main Configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHAnalyzer.html">Analyzer configuration file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHAPI.html">OwlH API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHAPIM.html">OwlH MASTER RESTful API</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHAPIN.html">OwlH NODE RESTful API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OwlHTroubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHTroubleshooting.html#owlh-node">OwlH Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHTroubleshooting.html#owlh-master">OwlH Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="OwlHTroubleshooting.html#owlh-ui">OwlH UI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lookingfor.html">Looking forâ€¦</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OwlHSuricata.html">OwlH and Suricata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHSuricata.html#main-steps">Main steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHSuricata.html#suricata-output-with-owlh">Suricata output with OwlH</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHSuricata.html#suricata-rules">Suricata Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHZeek.html">OwlH and Zeek</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#integration-logical-diagram">Integration Logical Diagram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#components">Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#configure-zeek-owlh-node">Configure - Zeek - OwlH Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#zeek-logs-output-format-to-json">Zeek Logs Output format to JSON</a><ul>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#option-1-modify-ascii-writer-output">Option 1 - Modify ASCII writer output</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#zeek-event-enritchment-to-help-wazuh-ruleset">Zeek Event Enritchment to help Wazuh ruleset</a></li>
<li class="toctree-l4"><a class="reference internal" href="OwlHZeek.html#loading-zeek-customizations-at-zeek-start">Loading Zeek customizations at Zeek start</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="OwlHZeek.html#review-your-kibana-dashboard">Review your Kibana Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="OwlHMoloch.html">OwlH and Moloch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="OwlHMoloch.html#configure-moloch">Configure Moloch</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHMoloch.html#moloch-in-master">Moloch in Master</a></li>
<li class="toctree-l3"><a class="reference internal" href="OwlHMoloch.html#moloch-in-remote-server">Moloch in remote server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scenarios.html">Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scenarios.html#basic">BASIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="scenarios.html#advanced">ADVANCED</a></li>
<li class="toctree-l2"><a class="reference internal" href="scenarios.html#integrate-with-wazuh">INTEGRATE WITH WAZUH</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contact.html">If you need help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">owlh</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Sync with ELK 7.x</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/main/OwlH-node-elk.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sync-with-elk-7-x">
<h1>Sync with ELK 7.x<a class="headerlink" href="#sync-with-elk-7-x" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be sure you are running ELK (elasticsearch, filebeat and kibana) with version &gt;7.3.2</p>
</div>
<p>As usual, please keep in contact if there is any clarification or help needed.</p>
<ul class="simple">
<li>email our support team - <a class="reference external" href="mailto:support&#37;&#52;&#48;owlh&#46;net">support<span>&#64;</span>owlh<span>&#46;</span>net</a></li>
<li>join OwlH slack - <a class="reference external" href="https://join.slack.com/t/owlh/shared_invite/enQtNjE2NTEwODUzNTExLTJlNTdlMDRiMzM0ZTVhNWQ0YWE4YzgyYWQ4ZGYyMDQzMzM5NDA1M2I3NDlhYTFkNjdhZTk0MzFjMGU3ZWI3ZDM">OwlH Slack workspace</a></li>
<li>ask for professional support and services - <a class="reference external" href="mailto:prohelp&#37;&#52;&#48;owlh&#46;net">prohelp<span>&#64;</span>owlh<span>&#46;</span>net</a></li>
</ul>
<p>This process will allow you to connect your OwlH environment directly to ELK.</p>
<p>You will do:</p>
<blockquote>
<div><ul class="simple">
<li>install filebeat on OwlH Nodes</li>
<li>install OwlH-Filebeat module</li>
<li>import OwlH-Kibana objects in Kibana</li>
<li>load OwlH template in Elasticsearch</li>
<li>modify Filebeat main configuration to include OwlH module</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please, check URLs and paths to ensure you use the right commands and that you adapt command lines as needed.</p>
</div>
<div class="section" id="install-filebeat-in-your-owlh-nodes">
<h2>Install Filebeat in your OwlH Nodes<a class="headerlink" href="#install-filebeat-in-your-owlh-nodes" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic">
<li><p class="first">Import the GPG key:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Add the repository:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt; /etc/yum.repos.d/elastic.repo &lt;&lt; EOF
<span class="go">[elasticsearch-7.x]</span>
<span class="go">name=Elasticsearch repository for 7.x packages</span>
<span class="go">baseurl=https://artifacts.elastic.co/packages/7.x/yum</span>
<span class="go">gpgcheck=1</span>
<span class="go">gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch</span>
<span class="go">enabled=1</span>
<span class="go">autorefresh=1</span>
<span class="go">type=rpm-md</span>
<span class="go">EOF</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Install Filebeat</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> yum install filebeat
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="download-and-configure">
<h2>Download and configure<a class="headerlink" href="#download-and-configure" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># cd /tmp</span>
<span class="c1"># mkdir /tmp/owlhfilebeat</span>
<span class="c1"># cd /tmp/owlhfilebeat</span>
<span class="c1"># wget repo.owlh.net/fbit/owlh-module.tar.gz</span>
<span class="c1"># tar -C /tmp/owlhfilebeat -xf owlh-module.tar.gz</span>
</pre></div>
</div>
<div class="section" id="install-owlh-module">
<h3>Install OwlH module<a class="headerlink" href="#install-owlh-module" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># tar -C /usr/share/filebeat/module/ -xf /tmp/owlhfilebeat/owlh-filebeat-7.9.x.tar.gz</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="modify-filebeat">
<h2>Modify filebeat<a class="headerlink" href="#modify-filebeat" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="modify-filebeat-configuration">
<h3>Modify Filebeat configuration<a class="headerlink" href="#modify-filebeat-configuration" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># cp /tmp/owlhfilebeat/filebeat.yml /etc/filebeat/filebeat.yml</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">be sure to update properly your filebeat.yml file to point to your elasticsearch server.</p>
</div>
</div>
<div class="section" id="restart-filebeat">
<h3>Restart Filebeat<a class="headerlink" href="#restart-filebeat" title="Permalink to this headline">Â¶</a></h3>
<p>You should be done. check your kibana to see the OwlH dashboards in dashboards section, and indices in discovery section.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Restart</span> <span class="n">Filebeat</span>

<span class="c1"># systemctl restart filebeat</span>

<span class="n">Check</span> <span class="n">Filebeat</span> <span class="n">output</span>

<span class="c1"># journalctl -f -u filebeat</span>

<span class="n">From</span> <span class="n">your</span> <span class="n">web</span> <span class="n">browser</span><span class="p">,</span> <span class="n">check</span> <span class="n">kibana</span><span class="o">-&gt;</span><span class="n">discovery</span> <span class="k">for</span> <span class="n">owlh</span> <span class="n">indices</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, owlh team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.17.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>